<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book a Call — CopyJamie</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    html, body {
      overflow: auto;
    }

    .compose-page {
      max-width: 680px;
      margin: 0 auto;
      padding: calc(var(--topbar-height) + 24px) 16px 48px;
    }

    .compose-card {
      background: var(--surface);
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.12);
      overflow: hidden;
    }

    .compose-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 16px;
      background: #404040;
      color: #fff;
      font-family: var(--font-display);
      font-size: 14px;
      font-weight: 500;
      border-radius: 12px 12px 0 0;
    }

    .compose-header a {
      color: #fff;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
    }

    .compose-header .material-symbols-outlined {
      font-size: 20px;
      cursor: pointer;
      opacity: 0.8;
      transition: opacity 0.15s;
    }

    .compose-header .material-symbols-outlined:hover {
      opacity: 1;
    }

    .compose-fields {
      border-bottom: 1px solid var(--border);
    }

    .compose-field {
      display: flex;
      align-items: center;
      padding: 8px 16px;
      border-bottom: 1px solid var(--border);
      font-size: 14px;
    }

    .compose-field:last-child {
      border-bottom: none;
    }

    .compose-field-label {
      color: var(--text-secondary);
      font-size: 14px;
      min-width: 70px;
      flex-shrink: 0;
    }

    .compose-field-value {
      color: var(--text-primary);
      font-size: 14px;
    }

    /* Form body */
    .compose-form {
      padding: 20px 16px 4px;
    }

    .compose-form p {
      font-size: 14px;
      line-height: 1.7;
      color: var(--text-primary);
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      font-size: 12px;
      font-weight: 500;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.3px;
      margin-bottom: 6px;
    }

    .required {
      color: var(--red);
      font-weight: 700;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      font-family: var(--font-body);
      font-size: 16px;
      color: var(--text-primary);
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 10px 12px;
      outline: none;
      transition: border-color 0.15s, box-shadow 0.15s;
      -webkit-appearance: none;
      appearance: none;
    }

    .form-group select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24'%3E%3Cpath fill='%235f6368' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 32px;
      cursor: pointer;
    }

    .form-group select option:disabled {
      color: var(--text-light);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
      line-height: 1.6;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: var(--blue);
      box-shadow: 0 0 0 2px rgba(66,133,244,0.15);
    }

    .form-group input::placeholder,
    .form-group textarea::placeholder {
      color: var(--text-light);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    /* Label with badge */
    .label-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
      flex-wrap: wrap;
    }

    .label-row label {
      margin-bottom: 0;
    }

    .discount-badge {
      display: none;
      align-items: center;
      gap: 3px;
      font-size: 10px;
      font-weight: 700;
      color: #137333;
      background: #e6f4ea;
      border-radius: 3px;
      padding: 2px 6px;
      letter-spacing: 0.2px;
      white-space: nowrap;
    }

    .discount-badge.visible {
      display: inline-flex;
    }

    .discount-badge .material-symbols-outlined {
      font-size: 13px;
    }

    .compose-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      border-top: 1px solid var(--border);
    }

    .send-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--blue);
      color: #fff;
      border: none;
      border-radius: 18px;
      padding: 8px 20px;
      font-family: var(--font-display);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.15s, box-shadow 0.15s;
    }

    .send-btn:hover {
      background: #3367d6;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .send-btn:disabled {
      background: #93b4e8;
      cursor: not-allowed;
      box-shadow: none;
    }

    .send-btn .material-symbols-outlined {
      font-size: 18px;
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 13px;
      padding: 6px 12px;
      border-radius: 16px;
      transition: background 0.15s;
      margin-top: 16px;
    }

    .back-link:hover {
      background: var(--hover);
    }

    .back-link .material-symbols-outlined {
      font-size: 18px;
    }

    /* Sent confirmation */
    .sent-confirmation {
      display: none;
      text-align: center;
      padding: 48px 24px;
    }

    .sent-confirmation .material-symbols-outlined {
      font-size: 48px;
      color: var(--green);
      margin-bottom: 16px;
    }

    .sent-confirmation h2 {
      font-family: var(--font-display);
      font-size: 20px;
      font-weight: 500;
      margin-bottom: 8px;
    }

    .sent-confirmation p {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    @media (max-width: 768px) {
      .compose-page {
        padding: 72px 8px 32px;
      }
      .compose-card {
        border-radius: 8px;
      }
      .compose-header {
        border-radius: 8px 8px 0 0;
      }
      .form-row {
        grid-template-columns: 1fr;
        gap: 0;
      }
    }
  </style>
</head>
<body>

  <!-- Top Bar -->
  <header class="topbar">
    <div class="topbar-left">
      <a href="index.html" class="icon-btn" aria-label="Back to inbox">
        <span class="material-symbols-outlined">arrow_back</span>
      </a>
      <a href="index.html" class="logo">
        <svg class="logo-icon" viewBox="0 0 24 24" width="32" height="32">
          <path d="M1 5.5L12 13.5L23 5.5V18.5C23 19.6 22.1 20.5 21 20.5H3C1.9 20.5 1 19.6 1 18.5V5.5Z" fill="#c2e7ff"/>
          <path d="M23 5.5L12 13.5L1 5.5L3 3.5H21L23 5.5Z" fill="#4285f4"/>
        </svg>
        <span class="logo-text">CopyJamie</span>
      </a>
    </div>
    <div class="topbar-right">
      <button class="avatar-btn" aria-label="Profile">J</button>
    </div>
  </header>

  <div class="compose-page">
    <div class="compose-card">

      <div class="compose-header">
        <span>New Message</span>
        <a href="index.html" aria-label="Close"><span class="material-symbols-outlined">close</span></a>
      </div>

      <div class="compose-fields">
        <div class="compose-field">
          <span class="compose-field-label">To</span>
          <span class="compose-field-value">hey@jamiesutton.com</span>
        </div>
        <div class="compose-field">
          <span class="compose-field-label">Subject</span>
          <span class="compose-field-value">I want emails like these</span>
        </div>
      </div>

      <form id="contactForm" action="https://formspree.io/f/xkovkwle" method="POST">
        <div class="compose-form">
          <p>Hey Jamie — I liked what I saw. Here's a bit about what I'm looking for:</p>

          <div class="form-group">
            <label for="name">Your name <span class="required">*</span></label>
            <input type="text" id="name" name="name" placeholder="First and last" required>
          </div>

          <div class="form-group">
            <label for="email">Your email <span class="required">*</span></label>
            <input type="email" id="email" name="email" placeholder="you@company.com" required>
          </div>

          <div class="form-group">
            <label for="website">Business website <span class="required">*</span></label>
            <input type="text" id="website" name="website" placeholder="https://yourcompany.com" required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="brands">Brands you want copy for <span class="required">*</span></label>
              <select id="brands" name="brands" required>
                <option value="" disabled selected>How many?</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6-plus">More than 5</option>
              </select>
            </div>

            <div class="form-group">
              <label for="comms">Communication style <span class="required">*</span></label>
              <select id="comms" name="comms" required>
                <option value="" disabled selected>Your preference</option>
                <option value="async">Async only (email / Loom)</option>
                <option value="mix">Mix of async + calls</option>
                <option value="calls">Prefer live calls</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <div class="label-row">
              <label for="retainer">Monthly budget <span class="required">*</span></label>
              <span class="discount-badge" id="discountBadge">
                <span class="material-symbols-outlined">sell</span>
                15% OFF — ASYNC PRICING
              </span>
            </div>
            <select id="retainer" name="retainer" required>
              <option value="" disabled selected>Select a tier</option>
              <option value="1000" data-base="1000">$1,000/mo — Starter</option>
              <option value="2000" data-base="2000">$2,000/mo — Growth</option>
              <option value="3000" data-base="3000">$3,000/mo — Full Service</option>
              <option value="custom" data-base="custom">Custom package</option>
            </select>
          </div>

          <div class="form-group">
            <label for="details">Tell me about what you're looking for <span class="required">*</span></label>
            <textarea id="details" name="details" placeholder="What does your business do? Who's your audience? What's not working with your current emails?" required></textarea>
          </div>
        </div>

        <div class="compose-actions">
          <button type="submit" class="send-btn">
            <span class="material-symbols-outlined">send</span>
            Send
          </button>
        </div>
      </form>

      <div class="sent-confirmation" id="sentConfirmation">
        <span class="material-symbols-outlined">check_circle</span>
        <h2>Message sent</h2>
        <p>Thanks for reaching out. I'll get back to you within 24 hours.</p>
      </div>

    </div>

    <a href="index.html" class="back-link">
      <span class="material-symbols-outlined">arrow_back</span>
      Back to inbox
    </a>
  </div>

  <script>
    const brandsEl = document.getElementById('brands');
    const commsEl = document.getElementById('comms');
    const retainerEl = document.getElementById('retainer');
    const discountBadge = document.getElementById('discountBadge');

    const baseTiers = [
      { value: '1000', base: 1000, label: 'Starter', maxBrands: 2 },
      { value: '2000', base: 2000, label: 'Growth', maxBrands: 3 },
      { value: '3000', base: 3000, label: 'Full Service', maxBrands: 5 },
      { value: 'custom', base: null, label: 'Custom package' }
    ];

    function getBrandCount() {
      const v = brandsEl.value;
      if (v === '6-plus') return 6;
      return parseInt(v) || 0;
    }

    function isAsync() {
      return commsEl.value === 'async';
    }

    function updateRetainer() {
      const brandCount = getBrandCount();
      const async = isAsync();
      const currentValue = retainerEl.value;

      // Show/hide discount badge
      discountBadge.classList.toggle('visible', async);

      // Rebuild options
      retainerEl.innerHTML = '<option value="" disabled>Select a tier</option>';

      baseTiers.forEach(tier => {
        const opt = document.createElement('option');

        if (tier.base === null) {
          // Custom — always available
          opt.value = 'custom';
          opt.textContent = 'Custom package';
        } else {
          const tooManyBrands = tier.maxBrands && brandCount > tier.maxBrands;

          if (tooManyBrands) {
            opt.value = tier.value;
            opt.textContent = `$${tier.base.toLocaleString()}/mo — ${tier.label} (${brandCount > 3 ? '4+ brands — ' : ''}requires higher tier)`;
            opt.disabled = true;
          } else if (async) {
            const discounted = Math.round(tier.base * 0.85);
            opt.value = discounted;
            opt.textContent = `$${discounted.toLocaleString()}/mo — ${tier.label} (was $${tier.base.toLocaleString()})`;
          } else {
            opt.value = tier.value;
            opt.textContent = `$${tier.base.toLocaleString()}/mo — ${tier.label}`;
          }
        }

        retainerEl.appendChild(opt);
      });

      // Restore selection if still valid
      const match = retainerEl.querySelector(`option[value="${currentValue}"]:not(:disabled)`);
      if (match) {
        retainerEl.value = currentValue;
      } else {
        retainerEl.value = '';
        retainerEl.querySelector('option[disabled]').selected = true;
      }
    }

    brandsEl.addEventListener('change', updateRetainer);
    commsEl.addEventListener('change', updateRetainer);

    // Submit via Formspree (fetch so we stay on page)
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const form = this;
      const btn = form.querySelector('.send-btn');
      btn.disabled = true;
      btn.innerHTML = '<span class="material-symbols-outlined">hourglass_top</span> Sending…';

      fetch(form.action, {
        method: 'POST',
        body: new FormData(form),
        headers: { 'Accept': 'application/json' }
      }).then(function(response) {
        if (response.ok) {
          form.style.display = 'none';
          document.querySelector('.compose-fields').style.display = 'none';
          document.getElementById('sentConfirmation').style.display = 'block';
        } else {
          btn.disabled = false;
          btn.innerHTML = '<span class="material-symbols-outlined">send</span> Send';
          alert('Something went wrong. Please try again or email hey@jamiesutton.com directly.');
        }
      }).catch(function() {
        btn.disabled = false;
        btn.innerHTML = '<span class="material-symbols-outlined">send</span> Send';
        alert('Network error. Please try again or email hey@jamiesutton.com directly.');
      });
    });
  </script>
  <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "e97ae9d249d545f3b412931b22b4b7b9"}'></script><!-- End Cloudflare Web Analytics -->
</body>
</html>
